{% extends "layout.html" %}

<!-- Picture/Advertisement for category -->
<!-- Picture/Advertisement for category -->

<!-- Breadcrumbs -->
{% block breadcrumbs %}
    <a href="{% url 'home' %}">Home</a>
    >
    <a href="{% url 'products:list' %}">Shop</a>
    >
    <a href="{% url 'products:list' %}{{view.kwargs.category}}">{{view.kwargs.category}}</a>
{% endblock %}
<!-- Breadcrumbs -->

<!-- Category Page Header -->
<!-- Category Page Header -->
<!-- Sorting Sidebar -->
<!-- Sorting Sidebar -->
<!-- Number search results -->
{% block content %}
{% load product_extras %}
{% load humanize %}
    <div class="container">
        <!-- Category Name Header -->
        <h1 class="text-center">{{view.kwargs.category}}</h1>
        <!-- Category Name Header -->

        <!-- Sorting drop down menu -->
        <label>Sort By: 
            <select name="action" required="">
                <option value="" selected="">---------</option>
            </select>
        </label>
        <!-- Sorting drop down menu -->

        <!-- Product Cards -->
        <div class="row">
        {% for product in product_list %}
            <div class="col-md-4">
                <a href="{% url 'products:detail' view.kwargs.category product.productSlug %}">
                    <img src="{{ product.productimage_set.first.productImagePath.url }}" alt="{{ product.productName }}" height="364" width="300">
                </a>
                <h2 class="text-center">{{product.productName}}</h2>
                {% if product.pricing_set.first.productID.pdiscount_set.first.pDiscountType %}
                    <div class="text-center">
                        <s>${{product.pricing_set.first.pricingBasePrice|floatformat:2}}</s>
                        <h4>${% get_discount_price product.pricing_set.first.pricingBasePrice as discounted_price %}{{discounted_price|floatformat:2}}</h4>
                    </div>
                {% else %}
                    <h4>${{product.pricing_set.first.pricingBasePrice|floatformat:2}}</h4>
                {% endif %}
            </div>
        {% endfor %}
        </div>
        <hr>
        <!-- Product Cards -->

        <!-- Pagination. Django has a Paginator module/template at https://docs.djangoproject.com/en/2.1/topics/pagination/#using-paginator-in-view -->
        <!-- Pagination -->
    </div> <!-- /container -->

{% endblock %}